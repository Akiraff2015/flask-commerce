<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <main>
        <a href="/logout">Logout</a>
        <a href="/shop">Shop</a>
        <h1>Welcome back, {{user}}!</h1>
        <p>Create new product?</p>
        <form action="/create/product" method="POST">
            Name: <input type="text" name="name"> <br>
            Quantity: <input type="number" name="quantity"> <br>
            Price: <input type="number" step="0.01" name="price"> <br>
            Currency: <input type="text" name="currency" value="USD"> <br>
            Description: <input type="text" name="description"> <br>
            <input type="submit" value="Create Product">
        </form>
        <h1>List of useless products: </h1>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
            {% for product in products %}
                <tr>
                    <td>{{ product["_id"] }}</td>
                    <td>{{ product["name"] }}</td>
                    <td>{{product["currency"]}} {{ product["price"] }}</td>
                    <td>{{ product["quantity"] }}</td>
                    <td>{{ product["description"] }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <h1>List of useless purchases: </h1>
        <table>
            <thead>
                <tr>
                    <th>Transaction History</th>
                    <th>Username</th>
                    <th>Items</th>
                    <th>Total Price</th>
                    <th>Shipped?</th>
                </tr>
            </thead>
            <tbody>
            {% for transaction in transactions %}
                <tr>
                    <td>{{ transaction["_id"] }}</td>
                    <td>{{ transaction["profile"] }}</td>
                    <td>
                        <ul>
                            {% for cart in transaction["cart"] %}
                                <li>{{ cart.name }} - {{cart.currency}} {{ cart.price }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                    <td>{{ transaction["cart"][0].currency}} {{ transaction["total"] }}</td>
                    <td>No</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </main>
</body>
</html>